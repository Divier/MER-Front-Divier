<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:cc="http://xmlns.jcp.org/jsf/composite/componentes"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    template="/view/MGL/template/main.xhtml" >
    <ui:define name="title"><span class="TituloSeccion">Administrador Plantas</span></ui:define>
    <ui:define name="message"><span class="error"> #{plantaMglBean.message}</span></ui:define>
    <ui:define name="content">
        <script language="javascript" type="text/javascript">
            function submitByEnter(e) {
                if (e.keyCode === 13) {
                    return false;
                } else {
                    return true;
                }
            };
            
            function noatras() {
                window.location.hash = "no-back-button";
                window.location.hash = "Again-No-back-button"
                window.onhashchange = function () {
                    window.location.hash = "no-back-button";
                }
            };
        </script>
      
        <body  onload="noatras();">
            <p:panel id="panelPlantas" >
                <p:accordionPanel id="panelConsActuElim" >
                    <p:tab id="pcae_tab"
                           title="UBICACION PLANTA #{plantaMglBean.plantaMgl.locationtype}"
                           rendered="#{plantaMglBean.mostrarInfoPlanta}">
                        <p:panelGrid id="pcae_PlantaMgl"
                                     columns="4" 
                                     class="EtiquetaConsulta" 
                                     style="width: 100%">
                            <p:outputLabel id="pcae_out_tipo_ubicacion"
                                           escape="false" 
                                           value="Tipo Ubicación" 
                                           style="width: 15%"/>
                            <p:outputLabel id="pcae_out_location_type"
                                           value="#{plantaMglBean.plantaMgl.locationtype}" 
                                           style="width: 35%"/>
                            <p:outputLabel id="pcae_LocationCode" 
                                           escape="false" 
                                           value="Codigo Ubicación" 
                                           style="width: 15%"	/>
                            <p:outputLabel id="pcae_locCTxt" 
                                           value="#{plantaMglBean.plantaMgl.locationcode}" 
                                           style="width: 35%"  />
                            <p:outputLabel id="pcae_PLocationType" 
                                           escape="false" 
                                           value="Padre Tipo Ubicación" 
                                           style="width: 15%" />
                            <p:outputLabel id="pcae_out_padre_location_type"
                                           escape="false" 
                                           value="#{plantaMglBean.plantaMgl.configuracionplantaparentid.locationtype}" 
                                           style="width: 35%" />
                            <p:outputLabel id="pcae_PLocationCode" 
                                           escape="false" 
                                           value="Padre Codigo Ubicación" 
                                           style="width: 15%" />
                            <p:outputLabel id="pcae_out_padre_location_code"
                                           escape="false" 
                                           value="#{plantaMglBean.plantaMgl.configuracionplantaparentid.locationcode}" 
                                           style="width: 35%" />
                            <p:outputLabel id="pcae_Description"
                                           escape="false" 
                                           value="#{nodoMglBean.estiloObligatorio}Descripción" 
                                           style="width: 15%" />
                            <p:inputText id="pcae_descTxt" 
                                         value="#{plantaMglBean.plantaMgl.description}" 
                                         maxlength="40" 
                                         size="80" 
                                         style="width: 35%" 
                                         disabled="#{plantaMglBean.activarbotmodifielimi or plantaMglBean.bloqCampDescripActualiza}" />
                            <p:outputLabel id="pcae_Hour24" 
                                           escape="false" 
                                           value="#{nodoMglBean.estiloObligatorio}24 Horas"
                                           style="width: 15%" />
                            <p:inputText id="pcae_htxt24" 
                                         value="#{plantaMglBean.plantaMgl.hour24}" 
                                         maxlength="3"
                                         style="width: 35%" 
                                         disabled="#{plantaMglBean.activarbotmodifielimi}" />
                            <p:outputLabel escape="false" 
                                           value="#{nodoMglBean.estiloObligatorio}48 Horas" 
                                           id="pcae_Hour48" 
                                           style="width: 15%" />
                            <p:inputText id="pcae_htxt48" 
                                         value="#{plantaMglBean.plantaMgl.hour48}" 
                                         maxlength="3"
                                         style="width: 35%" 
                                         size="6" 
                                         disabled="#{plantaMglBean.activarbotmodifielimi}" />
                            <p:outputLabel id="pcae_Week" 
                                           escape="false" 
                                           value="#{nodoMglBean.estiloObligatorio}Semana"
                                           style="width: 15%" />
                            <p:inputText id="pcae_weekTxt" 
                                         value="#{plantaMglBean.plantaMgl.week}" 
                                         maxlength="3" 
                                         style="width: 35%" 
                                         size="6" 
                                         disabled="#{plantaMglBean.activarbotmodifielimi}" />
                            <p:outputLabel id="pcae_Month" 
                                           escape="false" 
                                           value="#{nodoMglBean.estiloObligatorio}Mes"
                                           style="width: 15%" />
                            <p:inputText id="pcae_montTxt" 
                                         value="#{plantaMglBean.plantaMgl.month}" 
                                         maxlength="3"
                                         style="width: 35%" 
                                         size="6" 
                                         disabled="#{plantaMglBean.activarbotmodifielimi}" />
                            <p:outputLabel id="pcae_Year"
                                           escape="false"
                                           value="#{nodoMglBean.estiloObligatorio}Año"
                                           style="width: 15%"/>
                            <p:inputText id="pcae_yearTxt" 
                                         value="#{plantaMglBean.plantaMgl.year}" 
                                         maxlength="5" 
                                         style="width: 35%"
                                         size="6" 
                                         disabled="#{plantaMglBean.activarbotmodifielimi}" />
                            <p:commandButton id="pcae_boton_habilitar"
                                             value="Habilitar Cambios" 
                                             actionListener="#{plantaMglBean.activarBotModifiElimi()}"
                                             styleClass="buttonl" 
                                             style="text-align: center; color:#FFFFFF;" 
                                             update="formPrincipal:panelPlantas"
                                             process="pcae_PlantaMgl" 
                                             ajax="false"	/>
                            <p:commandButton id="pcae_boton_actualiza"
                                             value="Actualizar" 
                                             actionListener="#{plantaMglBean.actualizarPlantaMgl()}"
                                             rendered="#{!plantaMglBean.activarbotmodifielimi}" 
                                             styleClass="buttonl" 
                                             style="text-align: center; color:#FFFFFF;"
                                             update="formPrincipal:panelPlantas"
                                             process="pcae_PlantaMgl"
                                             ajax="false" />
                            <p:commandButton id="pcae_boton_eliminar"
                                             value="Eliminar" 
                                             styleClass="buttonl" 
                                             actionListener="#{plantaMglBean.eliminarPlantaMgl()}"
                                             style="text-align: center; color:#FFFFFF; " 
                                             rendered="#{!plantaMglBean.activarbotmodifielimi}" 
                                             onclick="if (!confirm('Esta seguro que desea Eliminar la planta #{plantaMglBean.plantaMgl.locationtype.concat(plantaMglBean.plantaMgl.locationcode)}'))
                                                         return false;" 
                                             update="formPrincipal:panelPlantas"
                                             process="pcae_PlantaMgl"	
                                             ajax="false"	/>
                            <p:commandButton id="pcae_boton_volver"
                                             value="Volver" 
                                             actionListener="#{plantaMglBean.regresarPadre()}"
                                             styleClass="buttonl" 
                                             style="text-align: center; color:#FFFFFF;"  
                                             update="formPrincipal:panelPlantas"
                                             process="pcae_PlantaMgl"	
                                             ajax="false" />
                        </p:panelGrid>
                    </p:tab>
                </p:accordionPanel>
                <p:accordionPanel id="panelData" >
                    <p:tab id="pd_tab"
                           title="ADMINISTRACIÓN PLANTAS" >
                        <h:panelGroup id="tblConsultaAdmPlan" >
                            <h:dataTable id="plantaMglTable"  
                                         binding="#{plantaMglBean.dataTable}" 
                                         value="#{plantaMglBean.plantaMglList}" 
                                         var="plantaMgl"
                                         rows="15"  
                                         style="width: 100%;"  
                                         styleClass="constructGTable"
                                         headerClass="constructGTableHeader" 
                                         rendered="#{plantaMglBean.mostrarTablaNodos}"
                                         rowClasses="constructGTableEvenRow, constructGTableOddRow" >
                                <h:column id="pd_dt_c1">                                
                                    <f:facet  id="pd_dt_c1_fac" 
                                        name="header" >
                                        <h:outputText value="Configuración Planta Id" />
                                        <br />
                                        <h:inputText  id="pd_dt1_planId"
                                                      maxlength="10"
                                                      style="width: 50px"
                                                      value="#{plantaMglBean.cmtFiltroConsultaPlantaDto.configuracionPlantaId}" >
                                            <f:ajax listener="#{plantaMglBean.findByFiltro}"
                                                    execute="@this plantaMglTable" 
                                                    render="plantaMglTable" />
                                        </h:inputText>
                                    </f:facet>
                                    <h:commandButton id="pd_dt1_boton_id_confi_plan"
                                                     action="#{plantaMglBean.goPlantaSeleccionada()}" 
                                                     value="#{plantaMgl.configuracionplantaid}"
                                                     styleClass="buttonl" 
                                                     style="text-align: center; color:#FFFFFF;" 
                                                     disabled="#{!plantaMglBean.validarPlantaIdRol()}"/>
                                </h:column>
                                <h:column id="pd_dt_c2">
                                    <f:facet id="pd_dt_c2_fac"
                                        name="header" >
                                        <h:outputText value="Tipo Ubicación"/><br />
                                    </f:facet>
                                    <h:outputText value="#{plantaMgl.locationtype}"/>
                                </h:column>
                                <h:column id="pd_dt_c3">
                                    <f:facet id="pd_dt_c3_fac"
                                        name="header">
                                        <h:outputText value="Codigo de Ubicación"/>
                                        <br />
                                        <h:inputText  id="pd_dt1_locationCId" 
                                                      maxlength="30" 
                                                      style="width: 50px"
                                                      value="#{plantaMglBean.cmtFiltroConsultaPlantaDto.locationCode}" >
                                            <f:ajax listener="#{plantaMglBean.findByFiltro}"
                                                    execute="@this plantaMglTable" 
                                                    render="plantaMglTable" /> 
                                        </h:inputText>
                                    </f:facet>
                                    <h:outputText value="#{plantaMgl.locationcode}"/>
                                </h:column>
                                <h:column id="pd_dt_c4">
                                    <f:facet id="pd_dt_c4_fac"
                                        name="header">
                                        <h:outputText value="Descripción"/>
                                        <br />
                                        <h:inputText  id="pd_dt1_descrId"
                                                      maxlength="30"
                                                      style="width: 50px"
                                                      value="#{plantaMglBean.cmtFiltroConsultaPlantaDto.description}" >
                                            <f:ajax listener="#{plantaMglBean.findByFiltro}"
                                                    execute="@this plantaMglTable"
                                                    render="plantaMglTable" />
                                        </h:inputText>
                                    </f:facet>
                                    <h:outputText value="#{plantaMgl.description}" />
                                </h:column>
                                <h:column id="pd_dt_c5">
                                    <f:facet id="pd_dt_c5_fac"
                                        name="header">
                                        <h:outputText value="Padre tipo de ubicación"/><br />
                                    </f:facet>
                                    <h:outputText value="#{plantaMgl.configuracionplantaparentid.locationtype}"/>
                                </h:column>
                                <h:column id="pd_dt_c6">
                                    <f:facet id="pd_dt_c6_fac"
                                        name="header">
                                        <h:outputText value="Padre codigo ubicacion"/>
                                    </f:facet>
                                    <h:outputText value="#{plantaMgl.configuracionplantaparentid.locationcode}"/>
                                </h:column>
                                <f:facet id="pd_dt_fac"
                                         name="footer" >
                                    <h:panelGroup id="pd_dt_fac_pg">
                                        <h:commandButton id="plantaMglTablePF" 
                                                         value= ""  
                                                         action="#{plantaMglBean.pageFirst}" 
                                                         class="botonTPagInicioCm botonBaselista"
                                                         immediate="true" />
                                        <h:commandButton  id="plantaMglTablePP"
                                                          value= ""
                                                          action="#{plantaMglBean.pagePrevious}"
                                                          class="botonTPagAnteriorCm botonBaselista"
                                                          immediate="true" />
                                        <h:commandButton id="plantaMglTablePA"
                                                         value="#{plantaMglBean.pageActual}" 
                                                         immediate="true" />
                                        <h:selectOneMenu  id="plantaMglTableSOMP" 
                                                          value="#{plantaMglBean.numPagina}" 
                                                          styleClass="ListaConsulta" 
                                                          style="width: 40px; height:19px;" >
                                            <f:selectItems value="#{plantaMglBean.paginaList}" 
                                                           var="pag"
                                                           itemValue="#{pag}"
                                                           itemLabel="#{pag}" />
                                            <f:ajax render="plantaMglTable"  
                                                    event="change"  
                                                    listener="#{plantaMglBean.irPagina()}"  
                                                    execute="@this" />
                                        </h:selectOneMenu>
                                        <h:commandButton  id="plantaMglTablePN" 
                                                          value= "" 
                                                          action="#{plantaMglBean.pageNext}" 
                                                          class="botonTPagSiguienteCm botonBaselista"
                                                          immediate="true" />
                                        <h:commandButton  id="plantaMglTablePL" 
                                                          value= "" 
                                                          action="#{plantaMglBean.pageLast}" 
                                                          class="botonTPagFinCm botonBaselista" 
                                                          immediate="true" />
                                    </h:panelGroup>
                                </f:facet>
                            </h:dataTable>
                            <h:dataTable id="NodosMglTable"  
                                         binding="#{plantaMglBean.dataTableHhppByNodoDto}" 
                                         value="#{plantaMglBean.listaHhppByNodoDtoPaginado}" 
                                         var="HhppByNodoDto"
                                         rows="55"  
                                         style="width: 100%;"  
                                         styleClass="constructGTable"
                                         headerClass="constructGTableHeader" 
                                         rendered="#{!plantaMglBean.mostrarTablaNodos}"
                                         rowClasses="constructGTableEvenRow, constructGTableOddRow" >
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Direccion"/><br />
                                    </f:facet>
                                    <h:outputText value="#{HhppByNodoDto.dirDetallaConsulta.direccionTexto}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Barrio"/><br />
                                    </f:facet>
                                    <h:outputText value="#{HhppByNodoDto.dirDetallaConsulta.barrio}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Centro Poblado"/><br />
                                    </f:facet>
                                    <h:outputText value="#{HhppByNodoDto.geoPolCPobConsulta.gpoNombre}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Ciudad"/><br />
                                    </f:facet>
                                    <h:outputText value="#{HhppByNodoDto.geoPolCiuConsulta.gpoNombre}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Departamento"/><br />
                                    </f:facet>
                                    <h:outputText value="#{HhppByNodoDto.geoPolDeparConsulta.gpoNombre}"/>
                                </h:column>
                                <f:facet id="nd_tabl_botones" name="footer" >
                                    <h:panelGroup id="nd_tabl_bot_div_panGro">
                                        <h:commandButton id="NodosMglTableBtnPF"
                                                         action="#{plantaMglBean.nodoXhhppPageFirst}" 
                                                         class="botonTPagInicioCm botonBaselista" />
                                        <h:commandButton id="NodosMglTableBtnPP"
                                                         action="#{plantaMglBean.nodoXhhppPagePrevious}" 
                                                         class="botonTPagAnteriorCm botonBaselista" />
                                        <h:commandButton id="NodosMglTableBtnPS" 
                                                         value="#{plantaMglBean.nodoxhhpppaginaactual} de #{plantaMglBean.nodoxhhppPaginaList.size()}" />
                                        <h:selectOneMenu  id="NodosMglTableBtnSOMP"
                                                          value="#{plantaMglBean.nodoxhhpppaginaactual}"
                                                          styleClass="ListaConsulta" 
                                                          style="width: 40px; height:19px;" >
                                            <f:selectItems value="#{plantaMglBean.nodoxhhppPaginaList}" 
                                                           var="nodoxhhpppag"
                                                           itemValue="#{nodoxhhpppag}" 
                                                           itemLabel="#{nodoxhhpppag}" />
                                            <f:ajax render="NodosMglTable" 
                                                    event="change" 
                                                    listener="#{plantaMglBean.nodoxhhppIrPagina()}" 
                                                    execute="@this" />
                                        </h:selectOneMenu>
                                        <h:commandButton  id="NodosMglTableBtnPN"
                                                          action="#{plantaMglBean.nodoXhhppPageNext}"
                                                          class="botonTPagSiguienteCm botonBaselista" />
                                        <h:commandButton  id="NodosMglTableBtnPL" 
                                                          action="#{plantaMglBean.nodoXhhppPageLast}"
                                                          class="botonTPagFinCm botonBaselista" />
                                    </h:panelGroup>
                                </f:facet>
                            </h:dataTable>
                        </h:panelGroup>
                    </p:tab>
                </p:accordionPanel>
                <p:accordionPanel id="panelCreacion">
                    <p:tab id="pc_tab"
                           title="CREACION PLANTA #{plantaMglBean.plantaMglNuevo.locationtype}"
                           rendered="#{plantaMglBean.mostrarTablaNodos}" >
                        <p:panelGrid id="pcplantaMgl"
                                     columns="4" 
                                     class="EtiquetaConsulta" 
                                     style="width: 100%" >
                            <p:outputLabel id="pc_out_location_type"
                                           escape="false" 
                                           value="Tipo Ubicación" 
                                           style="width: 15%" />
                            <p:outputLabel id="pc_in_location_type"
                                           value="#{plantaMglBean.plantaMglNuevo.locationtype}" 
                                           style="width: 35%" />
                            <p:outputLabel id="pc_out_location_code" 
                                           escape="false" 
                                           style="width: 15%"
                                           value="#{nodoMglBean.estiloObligatorio}Codigo Ubicación" />
                            <p:inputText id="pc_in_location_code" 
                                         value="#{plantaMglBean.plantaMglNuevo.locationcode}" 
                                         maxlength="6" size="10" 
                                         style="width: 35%" >
                                <f:ajax listener="#{plantaMglBean.validaExistenciaNodoPlanta}"  
                                        execute="@this pcplantaMgl" 
                                        render="pcdescTxt" />
                            </p:inputText>
                            <p:outputLabel id="pc_out_PLocation_Type" 
                                           escape="false" 
                                           value="Padre Tipo Ubicación" 
                                           style="width: 15%" />
                            <p:outputLabel id="pc_in_Plocation_type"
                                           escape="false" 
                                           value="#{plantaMglBean.plantaMglNuevo.configuracionplantaparentid.locationtype}" 
                                           style="width: 35%" />
                            <p:outputLabel id="pc_out_PLocation_Code" 
                                           escape="false" 
                                           value="Padre Codigo Ubicación" 
                                           style="width: 15%" />
                            <p:outputLabel id="pc_in_PLocation_Code" 
                                           escape="false" 
                                           value="#{plantaMglBean.plantaMglNuevo.configuracionplantaparentid.locationcode}" 
                                           style="width: 35%" />
                            <p:outputLabel id="pc_Description" 
                                           escape="false" 
                                           value="#{nodoMglBean.estiloObligatorio}Descripción" 
                                           style="width: 15%" />
                            <p:inputText id="pc_desc_Txt"
                                         value="#{plantaMglBean.plantaMglNuevo.description}"
                                         disabled="#{plantaMglBean.bloqCampDescripCreacion}"
                                         maxlength="40"
                                         size="80"
                                         style="width: 35%" />
                            <p:outputLabel id="pc_Hour_24" 
                                           escape="false" value="#{nodoMglBean.estiloObligatorio}24 Horas" 
                                           style="width: 15%" />
                            <p:inputText id="pc_htxt_24" 
                                         value="#{plantaMglBean.plantaMglNuevo.hour24}" 
                                         maxlength="3"
                                         style="width: 35%" />
                            <p:outputLabel id="pc_Hour_48" 
                                           escape="false" 
                                           value="#{nodoMglBean.estiloObligatorio}48 Horas"  
                                           style="width: 15%"/>
                            <p:inputText id="pc_htxt_48" 
                                         value="#{plantaMglBean.plantaMglNuevo.hour48}" 
                                         maxlength="3"
                                         style="width: 35%" 
                                         size="6" />
                            <p:outputLabel id="pc_Week" 
                                           escape="false" 
                                           value="#{nodoMglBean.estiloObligatorio}Semana" 
                                           style="width: 15%" />
                            <p:inputText id="pc_Week_Txt" 
                                         value="#{plantaMglBean.plantaMglNuevo.week}" 
                                         maxlength="3" 
                                         style="width: 35%" 
                                         size="6" />
                            <p:outputLabel id="pc_Month" 
                                           escape="false" 
                                           value="#{nodoMglBean.estiloObligatorio}Mes" 
                                           style="width: 15%" />
                            <p:inputText id="pc_Mont_Txt" 
                                         value="#{plantaMglBean.plantaMglNuevo.month}" 
                                         maxlength="3"
                                         style="width: 35%" 
                                         size="6" />
                            <p:outputLabel id="pc_Year" 
                                           escape="false" 
                                           value="#{nodoMglBean.estiloObligatorio}Año" 
                                           style="width: 15%" />
                            <p:inputText id="pc_year_Txt" 
                                         value="#{plantaMglBean.plantaMglNuevo.year}" 
                                         maxlength="5"
                                         style="width: 35%" 
                                         size="6" />
                            <p:commandButton id="pc_Btn_Crear" 
                                             value="Crear #{plantaMglBean.plantaMglNuevo.locationtype}"
                                             styleClass="buttonl" 
                                             action="#{plantaMglBean.crearPlantaMgl()}"
                                             style="text-align: center; color:#FFFFFF;" 
                                             update="formPrincipal:panelPlantas"
                                             process="panelCreacion"
                                             ajax="false" 
                                             disabled="#{!plantaMglBean.validarCrearRol()}"/>
                        </p:panelGrid>
                    </p:tab>
                </p:accordionPanel>
            </p:panel>
        </body>

    </ui:define>
</ui:composition>