<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    template="/view/MGL/template/whiteTemplate.xhtml" 
    xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="content">

     
        <p:poll interval="3"  update="logEditor"/>

        <p:textEditor id="logEditor" widgetVar="logEditor" value="#{logMglBean.log}" 
                      height="300" style="margin-bottom:10px" placeholder="Visualiza el log."
                      readonly="true">
            <f:facet name="toolbar">
                <span class="ql-formats">
                    <button class="ql-bold"></button>
                    <button class="ql-italic"></button>
                    <button class="ql-underline"></button>
                    <button class="ql-strike"></button>
                </span>
                <span class="ql-formats">
                    <select class="ql-font"></select>
                    <select class="ql-size"></select>
                </span>
            </f:facet>
        </p:textEditor>
        
        
        
        <script type="text/javascript">
            //<![CDATA[
            function start() {
                PF('statusDialog').show();
            }

            function stop() {
                PF('statusDialog').hide();
            }
            //]]>
        </script>    


        <p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false" closable="false" resizable="false">
            <p:graphicImage library="images" name="ajaxloadingbar.gif" />
        </p:dialog>
        <h:form>   
            <p:commandButton value="Download" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="pi pi-download">
                <p:fileDownload value="#{logMglBean.file}" />
            </p:commandButton>      
        </h:form>

    </ui:define>

</ui:composition>

